<!--<img href="../../../project/img/film_info_background.jpg" height="100%">-->

<!-- Header -->
<nav class="navbar navbar-fixed-top navbar-inverse">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-2">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a  href="#/moviedefault" class="navbar-brand" rel="home" >
                <img class="logo_film"
                     src="./img/film_nerd_logo.jpg">
            </a>
        </div>

        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-2">

            <form class="navbar-form navbar-left" role="search">
                <div class="form-group">
                    <input ng-model = "model.movieName"
                           type="text"
                           class="form-control"
                           placeholder="Enter a movie name">
                </div>

                <a href ="#/search/{{model.movieName}}"
                   type="submit" class="btn btn-default">Submit</a>
            </form>

        </div>
    </div>
</nav>
<!-- End of Header-->

<!--Body-->


<div class="container pushdown">
    <!-- Movie Name -->
    <h1 >{{model.movie.title}} ({{model.movie.release_date  | date: 'yyyy'}})</h1>

    <!-- Movie Genre and Release Date-->
    <div class="row">
        <div class="col-xs-6">
            <h4  class="page-header">Genre</h4>
            <h5 ng-repeat="genre in model.movie.genres | limitTo:2">
                {{genre.name}}
            </h5>
        </div>

        <div class="col-xs-6">
            <h4  class="page-header">Release Date</h4>
            <div ng-if="!model.released">
                <br/><br/><br/>
            </div>

            <h5 ng-bind="model.movie.release_date | date: 'mediumDate'"></h5>
        </div>
    </div>

    <p></p>

    <!-- IMDB Rating and Film Nerd Rating -->

    <div class="row">
        <div class="col-xs-6">
            <h4  class="page-header">IMDB Rating</h4>
            <div ng-model="model.movie.criticsRating"
                 class="meter">

                <meter class="meter" min="0" max="5" value="{{model.movie.criticsRating}}"></meter>
                <p> <h5 class="rating">{{model.movie.criticsRating}}</h5>
                </p>
            </div>
        </div>

        <div class="col-xs-6">
            <h4  class="page-header">FilmNerd Rating</h4>
            <div ng-model="model.movie.usersRating"
                 class="meter">

                <meter class="meter" min="0" max="5" value="{{model.avgRating}}"></meter>
                <p> <h5 class="rating">{{model.avgRating}}</h5>
                </p>
            </div>

        </div>
    </div>
    <p></p>
    <div class="row">
        <div class="col-sm-3">
            <!-- Movie Poster-->
            <div class=fill>
                <img class="img paddingtop20" ng-src="https://image.tmdb.org/t/p/w300/{{model.movie.poster_path}}">
            </div>
                <!--<img class="img img-responsive profile" ng-src="https://image.tmdb.org/t/p/w300/{{model.movie.poster_path}}">-->

        </div>

        <p></p>
        <!-- Youtube Trailer-->
        <div class="col-sm-9">
            <div class="video-container">
                <iframe  width = "100%" ng-src="{{model.movie.video_path}}" frameborder="0" allowfullscreen=""></iframe>
            </div>
            <!--<div class="item active youtube-widget" ng-if="model.movie.video_path">-->
                <!--<iframe width = "100%" ng-src="{{model.movie.video_path}}" frameborder="0" allowfullscreen=""></iframe>-->
            <!--</div>-->
        </div>
    </div>

    <!-- Movie Summary-->
    <div class="row">
        <div class="col-xs-12">
            <h3 class="page-header">Summary</h3>
            <p class="justifytext">{{model.movie.overview}}</p>
        </div>
    </div>

    <!-- Cast of the Movie -->
    <div class="row">
        <div class="col-xs-12 ">
            <h3 class="page-header">Cast</h3>
            <h2></h2>
            <ul class="list-inline">
                <li class="w92"  ng-repeat="actor in model.movie.credits.cast"
                    ng-if="actor.profile_path">
                    <a href="#/cast/{{actor.id}}">
                        <img ng-src="https://image.tmdb.org/t/p/w92{{actor.profile_path}}"></a>
                    <p class="title" href="#/cast/{{actor.id}}">{{actor.name}}</p>
                    <!-- replace p with a to move to cast page -->
                </li>
            </ul>
        </div>
    </div>

    <p></p>

    <!-- Error pops up if user tries to sumbit review for the second time-->
    <div ng-if="model.error"
         class="alert alert-danger">
        {{model.error}}
    </div>

    <!-- ALert pops up if a non Logged in user tries to post a review -->
    <div ng-if="model.notLoggedInError"
         class="alert alert-danger">
        {{model.notLoggedInError}}
    </div>

    <!-- Logged Out User sees this -->
    <a ng-if="model.notloggedIn" class="btn btn-success btn-block"
       ng-click="model.giveError()">Rate and Review this movie</a>



    <!-- Logged in User sees this -->
    <a  ng-if="model.loggedIn" class="btn btn-success btn-block"
       ng-click="model.reviewPage()">Rate and Review this movie</a>


    <!-- User Reviews Section -->
    <p></p>
    <div ng-if="model.givecheckoutusererror"
         class="alert alert-danger">
        {{model.givecheckoutusererror}}
    </div>
    <h3 class="page-header">User Reviews</h3>

        <div   ng-repeat = "rev in model.movieInfo.reviews" >
            <div ng-if = "rev.visible=='true'">
            <div class="row">
                <!-- Username -->
                <div  ng-if="model.loggedIn" class="col-xs-9">
                    <a href="#/user/profile/{{rev.username}}">
                        <h3 class="glyphicon glyphicon-user makeblack"> {{rev.username}}
                        </h3>
                     </a>
                </div>
                <div  ng-if="model.notloggedIn" class="col-xs-9">
                    <a ng-click="model.needtoLoginforProfile()">
                        <h3 class="glyphicon glyphicon-user makeblack"> {{rev.username}}
                        </h3>
                    </a>
                </div>



              <!-- Report Button-->
                <a  type="button " ng-click="model.reportReview(rev._id)"
                    class=" reportbutton btn btn-default btn-sm">
                    <span class="glyphicon glyphicon-exclamation-sign  "></span> Report
                </a>

            </div>


                <!--Review text-->
            <div  class="row">
                <div class="col-xs-12">
                <p>{{rev.text}}</p>
                </div>
            </div>


        </div>

        </div>

    </div>

    <!-- Footer -->
<nav class="navbar navbar-inverse navbar-fixed-bottom">
    <div class="container-fluid">
        <p class="navbar-text pull-right">
            <a ng-if="model.loggedIn"
               ng-click="model.logout()">
                <span>Logout</span>
            </a>
            <a ng-if="model.notloggedIn"
               href="#/login">
                <span>Login</span>
            </a>
        </p>
        <p class="navbar-text pull-left">
            <a ng-if="model.loggedIn"
               href="#/profile">
                <span>Profile</span>
            </a>
            <a ng-if="model.notloggedIn"
               href="#/register">
                <span>Register</span>
            </a>
        </p>

    </div>
</nav>


